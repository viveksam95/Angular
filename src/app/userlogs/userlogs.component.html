<div class="flex h-screen">
  <app-sidenavbar class="fixed top-0 left-0 h-full"></app-sidenavbar>
  <div class="flex-grow ml-64 p-8 h-screen overflow-hidden">
    <div class="mainContent flex flex-col h-full justify-center items-center">
              <!-- Header section -->
        <div class="header-section">
          <h1 class="header-title">{{ activeHeader }}</h1>
          <div class="subheader-container">
            <div class="subheader-text">Create and edit task reports</div>
            <img src="../../assets/icons/i-icon.svg" alt="Icon" class="subheader-icon">
          </div>
          
          <!-- Search Bar and Date Filter -->
          <div class="flex items-center space-x-4 p-4">
            <input type="text" placeholder="Search..." (input)="onSearch($event)" class="search-bar px-4 py-2 rounded-lg border shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-64">
          
            <select (change)="onDateFilterChange($event)" class="date-filter px-4 py-2 rounded-lg border shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="day">Day</option>
              <option value="week">Week</option>
              <option value="month">Month</option>
            </select>
          
            <div class="flex items-center space-x-2">
              <label for="start-date" class="text-gray-600">Start:</label>
              <input type="date" id="start-date" (change)="onDateChange($event)" class="px-4 py-2 rounded-lg border shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
          
              <label for="end-date" class="text-gray-600">End:</label>
              <input type="date" id="end-date" (change)="onDateChange($event)" class="px-4 py-2 rounded-lg border shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
          </div>
            <!-- buttons -->
            <div class="button-container">
            <div class="button-frame">
              <div class="mb-4">
                <button
                  class="button"
                  [ngClass]="{ 'active-button': activeButton === 'task', 'transition-active': isTransitioning }"
                  (click)="showTable('task')"
                  (click)="setActiveButton('task')"
                >
                  Task
                </button>
                <button
                  class="button"
                  [ngClass]="{ 'active-button': activeButton === 'robot', 'transition-active': isTransitioning }"
                  (click)="showTable('robot')"

                  (click)="setActiveButton('robot')"
                >
                  Robot
                </button>
                <button
                  class="button"
                  [ngClass]="{ 'active-button': activeButton === 'fleet', 'transition-active': isTransitioning }"
                  (click)="showTable('fleet')"

                  (click)="setActiveButton('fleet')"
                >
                  Fleet
                </button>
              </div>
            </div>
          </div>

                <!-- Table -->
                <div class="table-container">
                  <!-- Your table or other content goes here -->
                  <div class="w-full max-w-6xl flex flex-col p-10 items-center justify-center gap-10 relative">
                    <div class="overflow-y-auto max-h-[32rem] w-full"> <!-- Set max-height to fit 8 rows, adjust as needed -->
                      <table class="min-w-full divide-y divide-gray-200" *ngIf="currentTable === 'task'">
                        <thead class="bg-gray-50">
                          <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Column 1</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Column 2</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Column 3</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Column 4</th>
                          </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                          <tr *ngFor="let item of taskData">
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column1 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column2 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column3 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column4 }}</td>
                          </tr>
                        </tbody>
                      </table>
                  
                      <table class="min-w-full divide-y divide-gray-200" *ngIf="currentTable === 'robot'">
                        <thead class="bg-gray-50">
                          <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Robot Column 1</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Robot Column 2</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Robot Column 3</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Robot Column 4</th>
                          </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                          <tr *ngFor="let item of robotData">
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column1 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column2 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column3 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column4 }}</td>
                          </tr>
                        </tbody>
                      </table>
                  
                      <table class="min-w-full divide-y divide-gray-200" *ngIf="currentTable === 'fleet'">
                        <thead class="bg-gray-50">
                          <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fleet Column 1</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fleet Column 2</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fleet Column 3</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fleet Column 4</th>
                          </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                          <tr *ngFor="let item of fleetData">
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column1 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column2 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column3 }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">{{ item.column4 }}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
        <!-- Export -->  
        <div class="export-button-container">
        <button class="export-button" (click)="showPopup()">Export</button>
        <div *ngIf="isPopupVisible" class="export-popup">
          <div class="popup-content">
            <h3>Select Export Format</h3>
            <button (click)="exportData('csv')">Export as CSV</button>
            <button (click)="exportData('excel')">Export as Excel</button>
            <button (click)="exportData('pdf')">Export as PDF</button>
            <button (click)="closePopup()" class="close-popup">Close</button>
          </div>
        </div>   
      
    </div>
  </div>
</div>

